<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PostMessage</title>
</head>

<body>
<h1>Содержимое iframe</h1>

<div>
    <p>Полученное сообщение</p>
    <div id="message"></div>
</div>
<script>
    const onMessage = (evt) => {
        const data = evt.data;
        const origin = evt.origin;

        /**
         * Проверка октуда пришел запрос
         */
        if (origin !== "https://codepen.io") {
            alert(`Запрос пришел с другого домена`);
            return;
        }

        let str = `Пришли неверные данные`;

        if (data.title && data.value) {
            str = `Сообщение: ${data.title}. Значение объекта: ${data.value}. --- ${origin}`;
        }

        document.getElementById(`message`).innerHTML = str;
    };

    if (typeof window.addEventListener != `undefined`) {
        window.addEventListener(`message`, onMessage, false);
    } else if (typeof window.attachEvent != `undefined`) {
        window.attachEvent(`onmessage`, onMessage);
    }
</script>
</body>

</html>
